`timescale 1ns / 1ps

module tb_data_memory();

    reg clk;
    reg MemWrite;
    reg [31:0] Address;
    reg [31:0] WriteData;
    wire [31:0] ReadData;

    // Instancia o módulo sob teste
    data_memory uut (
        .clk(clk),
        .MemWrite(MemWrite),
        .Address(Address),
        .WriteData(WriteData),
        .ReadData(ReadData)
    );

    // Geração do clock
    initial begin
        clk = 0;
        forever #5 clk = ~clk;
    end

    initial begin
        
        // Inicializa sinais
        MemWrite = 0;
        Address = 0;
        WriteData = 0;

        // Espera o clock estabilizar
        #10;

        // Simula resultado de $t2 = $t0 + $t1 = 15
        WriteData = 32'd15;
        Address = 32'd0;
        MemWrite = 1;
        #10;  // Escreve na borda de subida

        // Desativa escrita
        MemWrite = 0;
        #5;

        // Lê da mesma posição de memória
        Address = 32'd0;
        #5;

        $display("Leitura da Mem[0] = %d", ReadData);

        // Verifica se leitura foi correta
        if (ReadData == 15)
          $display(" Teste ok");
        else
          $display(" Erro ");

        $finish;
    end

endmodule